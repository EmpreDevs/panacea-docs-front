<div class="w-full">
	<!-- Label -->
	<label
		*ngIf="label"
		[for]="id"
		class="mb-2 block text-sm font-medium text-gray-900 dark:text-white"
		[ngClass]="{
			'after:ml-0.5 after:text-red-500 after:content-[\'*\']': required
		}"
	>
		{{ label }}
	</label>

	<!-- Editor Container -->
	<div
		class="relative w-full rounded-lg border transition-all duration-200"
		[ngClass]="{
			'border-gray-300 dark:border-gray-600': !isInvalid && !isValid,
			'border-red-500 dark:border-red-500': isInvalid,
			'border-green-500 dark:border-green-500': isValid,
			'opacity-50 cursor-not-allowed': isDisabled
		}"
	>
		<!-- Quill Editor -->
		<quill-editor
			#editor
			[id]="id"
			[placeholder]="editorConfig.placeholder || 'Escribe algo...'"
			[modules]="editorConfig.modules"
			[formats]="editorConfig.formats"
			[theme]="editorConfig.theme"
			[readOnly]="isDisabled || editorConfig.readOnly || false"
			class="wysiwyg-editor"
			[ngClass]="{
				'bg-gray-50 dark:bg-gray-800': isDisabled
			}"
		>
		</quill-editor>

		<!-- Character Counter -->
		<div
			*ngIf="editorConfig.showCounter"
			class="absolute bottom-2 right-2 rounded bg-white px-2 py-1 text-xs text-gray-500 shadow-sm dark:bg-gray-700 dark:text-gray-400"
			[ngClass]="{
				'text-red-500 dark:text-red-400': isMaxLengthReached
			}"
		>
			{{ counterText }}
		</div>
	</div>

	<!-- Validation Icons & Messages -->
	<div class="mt-2 flex items-start gap-2">
		<!-- Error Icon & Message -->
		<div *ngIf="isInvalid" class="flex items-center gap-1.5 text-sm text-red-600 dark:text-red-400">
			<lucide-angular [img]="iconAlert" class="h-4 w-4 flex-shrink-0"></lucide-angular>
			<span>{{ errorMessage }}</span>
		</div>

		<!-- Success Icon -->
		<div *ngIf="isValid" class="flex items-center gap-1.5 text-sm text-green-600 dark:text-green-400">
			<lucide-angular [img]="iconCheck" class="h-4 w-4 flex-shrink-0"></lucide-angular>
		</div>

		<!-- Hint -->
		<p *ngIf="hint && !isInvalid" class="text-sm text-gray-500 dark:text-gray-400">
			{{ hint }}
		</p>
	</div>
</div>
